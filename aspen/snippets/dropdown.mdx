export const Dropdown = ({ label, options, selected, setSelected }) => {
  const [dropdownOpen, setDropdownOpen] = useState(false);

  return (
    <div className={`z-20 relative inline-block`}>
      {dropdownOpen && (
        <div className="fixed inset-0 z-10" onClick={() => { setDropdownOpen(false); }}></div>
      )}
      <button
        className={`px-4 py-1.5 rounded-full font-semibold flex items-center gap-2 ${selected.length > 0 ? "bg-gray-900 text-white dark:bg-white dark:text-gray-900" : 'bg-gray-100 dark:bg-white/10'}`}
        onClick={() => setDropdownOpen((open) => !open)}
      >
        <span>{label} {selected.length > 0 && `(${selected.length})`}</span>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" className={`w-3 h-3 transition-transform duration-200 ${dropdownOpen && "rotate-180"}`}>
          <path d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z" fill="currentColor" />
        </svg>
      </button>
      {dropdownOpen && (
        <div className="absolute z-10 mt-2 w-56 bg-white border rounded-2xl shadow-lg p-3">
          {options.map((option) => (
            <div className="flex items-center justify-between px-3 py-1 rounded-xl cursor-pointer hover:bg-gray-100 dark:hover:bg-white/10" onClick={() => setSelected((prev) =>
              prev.includes(option)
                ? prev.filter((item) => item !== option)
                : [...prev, option]
            )}>
              <span className="font-semibold text-gray-800 dark:text-gray-100">{option}</span>
              <label key={option} className="flex items-center py-2 cursor-pointer">
                <input
                  type="checkbox"
                  checked={selected.includes(option)}
                />
              </label>
            </div>
          ))}
          <div className="flex space-x-2 justify-between mt-2 border-t border-gray-100 dark:border-white/10 pt-4">
            <button
              className="flex-1 px-4 py-1.5 rounded-full bg-gray-100 text-gray-600 font-semibold"
              onClick={() => { setDropdownOpen(false); setSelected([]) }}
            >
              Reset
            </button>
            <button
              className="flex-1 px-4 py-1.5 rounded-full bg-blue-600 text-white font-semibold"
              onClick={() => { setDropdownOpen(false); }}
            >
              Apply
            </button>
          </div>
        </div>
      )}
    </div>
  )
}